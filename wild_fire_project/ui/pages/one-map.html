<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>ê°•ì›ë„ í´ë¦­ â†’ ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
    html, body { margin:0; padding:0; height:100%; }
    #map { width:100vw; height:100vh; }
    #coordBox {
      position:absolute;
      top:1.5vh; left:1.5vw;
      background:rgba(255,255,255,0.9);
      padding:0.5rem 1rem;
      border:1px solid #333;
      font-weight:bold;
      z-index:1000;
      display:none;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="coordBox"></div>

  <!-- ì¹´ì¹´ì˜¤ë§µ SDK -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4b737229386d781c1484c4431d4a76a1"></script>
  <script>
    // 1) ì§€ë„ ìƒì„± (ë‚¨í•œ ì „ì²´)
    const map = new kakao.maps.Map(
      document.getElementById('map'),
      { center: new kakao.maps.LatLng(37.7,128.0), level: 8 }
    );

    // 2) ê°•ì›ë„ ì‚¬ê° ê²½ê³„ ì •ì˜ (ìœ„ê²½ë„: SW, NE)
    const sw = new kakao.maps.LatLng(37.018205, 127.080231);
    const ne = new kakao.maps.LatLng(38.642618, 129.371910);
    const box = [
      new kakao.maps.LatLng(sw.getLat(), sw.getLng()),
      new kakao.maps.LatLng(sw.getLat(), ne.getLng()),
      new kakao.maps.LatLng(ne.getLat(), ne.getLng()),
      new kakao.maps.LatLng(ne.getLat(), sw.getLng()),
      new kakao.maps.LatLng(sw.getLat(), sw.getLng()),
    ];
    const gangwonPoly = new kakao.maps.Polygon({
      path: box,
      strokeWeight: 3,
      strokeColor: '#00aa00',
      strokeStyle: 'dash',
      fillColor: 'rgba(0,255,0,0.1)',
    });
    gangwonPoly.setMap(map);

    // 3) í´ë¦­ ì¢Œí‘œ ë°•ìŠ¤
    const coordBox = document.getElementById('coordBox');

    // 4) í´ë¦­ ì´ë²¤íŠ¸: Bounds ë‚´ë¶€ë§Œ ì²˜ë¦¬
    //    LatLngBounds ë¡œ ë§Œë“  ì‚¬ê°í˜•
    const bounds = new kakao.maps.LatLngBounds(sw, ne);

    kakao.maps.event.addListener(map, 'click', e => {
      const lat = e.latLng.getLat();
      const lng = e.latLng.getLng();

      if (!bounds.contain(e.latLng)) {
        // ì‚¬ê° ë°– í´ë¦­ â†’ ë¬´ì‹œ
        return;
      }

      // 4-1) ì¢Œí‘œ í‘œì‹œ
      coordBox.innerText = `ğŸ“ ìœ„ë„: ${lat.toFixed(5)}, ê²½ë„: ${lng.toFixed(5)}`;
      coordBox.style.display = 'block';
      setTimeout(()=> coordBox.style.display='none', 4000);

      // 4-2) ì˜ˆì‹œ ì‹œë®¬ë ˆì´ì…˜: ë¹¨ê°„ íƒ€ì› ì• ë‹ˆë©”ì´ì…˜
      simulate(lat, lng);
    });

    // 5) ì˜ˆì‹œ: í´ë¦­ ìœ„ì¹˜ì— ë¹¨ê°„ íƒ€ì›(ì ì  ì»¤ì§€ëŠ” ì›) í‘œì‹œ
    let anim = null;
    function simulate(lat, lng) {
      if (anim) anim.setMap(null);  // ì´ì „ ì• ë‹ˆ ì œê±°
      let r = 1000;  // ì‹œì‘ ë°˜ê²½(m)
      anim = new kakao.maps.Circle({
        center: new kakao.maps.LatLng(lat, lng),
        radius: r,
        strokeWeight: 2,
        strokeColor: '#f00',
        fillColor: '#f00',
        fillOpacity: 0.3,
      });
      anim.setMap(map);

      const iv = setInterval(() => {
        r += 1000;
        anim.setRadius(r);
        if (r > 20000) clearInterval(iv);
      }, 200);
    }
  </script>
</body>
</html>
